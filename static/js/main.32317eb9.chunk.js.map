{"version":3,"sources":["../../src/index.js","App.js","index.js"],"names":["findBoldTag","str","open","i","normalText","close","boldText","n","findSpanTag","span","text","font","spanHTML","div","document","s","rgb2hex","options","this","host","path","type","item","value","direction","icon","style","image","newContent","_replace","_split","array","max","matches","regex","findSpanTagResp","color","self","Promise","resolve","window","event","data","error","console","fileName","output","blob","url","a","html2canvas","require","randomScalingFactor","Math","floor","random","labels","datasets","label","backgroundColor","borderColor","borderWidth","layout","padding","Object","assign","left","right","top","bottom","text2","text3","App","pdf","Pdf","defaultFontSize","defaultColor","addText","fontSize","addIcon","moveUp","indent","chart","canvas","dataUrl","toDataURL","addImage","log","save","display","margin","flexDirection","maxWidth","dangerouslySetInnerHTML","__html","paddingRight","className","ref","el","flex","maxHeight","marginBottom","height","cornerRadius","maintainAspectRatio","legend","scales","xAxes","barThickness","gridLines","offsetGridLines","stacked","yAxes","barPercentage","categoryPercentage","ticks","suggestedMin","suggestedMax","callback","onClick","Component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.32317eb9.chunk.js","sourcesContent":["/* eslint-disabled: 1 */\n/* eslint no-param-reassign: 0 */\n/* eslint class-methods-use-this: 0 */\n/* eslint new-parens: 0 */\n/* eslint semi: [\"error\", \"always\"] */\n// import jsPDF from 'jspdf';\n// import _isNumber from 'lodash/isNumber';\nimport _replace from 'lodash/replace';\nimport _split from 'lodash/split';\n\nfunction rgb2hex(str) {\n  return '#' + str.split(',').map(s => (s.replace(/\\D/g, '') | 0).toString(16)).map(s => s.length < 2 ? '0' + s : s).join('');\n}\n\nfunction findBoldTag(str, open) {\n  let i = 0;\n  const normalText = str.substr(i, open - i);\n  let boldText;\n  i = open + 3;\n  const close = str.indexOf('</b>', i);\n  if (close > i) {\n    boldText = str.substr(i, close - i);\n    i = close + 3;\n  } else {\n    boldText = str.substr(i);\n    i = str.length;\n  }\n  if (i < 0) {\n    i = 0;\n  }\n  return { n: i, normalText, boldText };\n}\n\nfunction findSpanTag(str, open) {\n  // console.log('findSpanTag', str);\n  let i = 0;\n  const normalText = str.substr(i, open - i);\n  const span = {\n    text: '',\n    font: 'n'\n  };\n  const close = str.indexOf('</span>', open);\n  if (close > open) {\n    const spanHTML = str.substr(open, close + 6 - i);\n    i = close + 6;\n    const div = document.createElement('div');\n    div.innerHTML = spanHTML;\n    if (div.firstChild && div.firstChild.style && div.firstChild.style !== undefined) {\n      if (div.firstChild.style.color !== undefined) {\n        span.color = rgb2hex(div.firstChild.style.color);\n      }\n      if (div.firstChild.style.fontWeight === 'bold') {\n        span.font = 'b';\n      }\n    }\n    span.text = div.firstChild.innerText;\n  } else {\n    span.text = str.substr(i);\n    i = str.length;\n  }\n  if (i < 0) {\n    i = 0;\n  }\n  return { i, normalText, span };\n}\n\nclass Pdf {\n  constructor(options = null) {\n    this.host = 'https://nclong87.github.io';\n    this.path = '/pdfwriter';\n    this.data = [];\n    this.options = options;\n  }\n  setHost(host) {\n    this.host = host;\n  }\n  setPath(path) {\n    this.path = path;\n  }\n\n  addPage(options) {\n    this.data.push({\n      type: 'addPage',\n      item: { options }\n    });\n  }\n\n  moveUp(value = 1) {\n    this.data.push({\n      type: 'move',\n      item: { direction: 'up', value }\n    });\n  }\n\n  moveDown(value = 1) {\n    this.data.push({\n      type: 'move',\n      item: { direction: 'down', value }\n    });\n  }\n\n  addIcon(icon, style = null, options = null) {\n    this.data.push({\n      type: 'icon',\n      item: { icon, style, options }\n    });\n  }\n\n  addImage(image, options = {}) {\n    this.data.push({\n      type: 'image',\n      item: { image, options }\n    });\n  }\n\n  addText(text, style = null, options = null) {\n    let newContent = _replace(text, '<br/>', '<br>');\n    newContent = _replace(text, '<br></b>', '</b><br>');\n    _split(newContent, '<br>').forEach(text => {\n      if (text.length === 0) {\n        this.data.push({\n          type: 'text',\n          item: { text: ' ', style, options }\n        });\n        return;\n      }\n      const array = [];\n      let max = 0;\n      for (let i = 0; i < text.length; i++) {\n        if (max > 30) {\n          break;\n        }\n        max += 1;\n        const str = text.substr(i);\n        const regex = /(<span|<b>)/g;\n        const matches = regex.exec(str);\n        if (matches) {\n          if (matches[0].includes('<b>')) {\n            const { normalText, boldText, n } = findBoldTag(str, matches.index);\n            i += n;\n            if (normalText) {\n              array.push({\n                text: normalText,\n                type: 'n'\n              });\n            }\n            if (boldText) {\n              array.push({\n                text: boldText,\n                type: 'b'\n              });\n            }\n          } else if (matches[0].includes('<span')) {\n            const findSpanTagResp = findSpanTag(str, matches.index);\n            i += findSpanTagResp.i;\n            const { normalText, span } = findSpanTagResp;\n            const { text, font, color } = span;\n            if (normalText) {\n              array.push({\n                text: normalText,\n                type: 'n'\n              });\n            }\n            if (text) {\n              array.push({\n                text: text,\n                type: font,\n                color: color\n              });\n            }\n          }\n        } else {\n          i = text.length;\n          array.push({\n            text: str,\n            type: 'n'\n          });\n        }\n      }\n      if (array.length === 1 && array[0].type === 'n') {\n        this.data.push({\n          type: 'text',\n          item: { text: array[0].text, style, options }\n        });\n      } else {\n        this.data.push({\n          type: 'formatted-text',\n          item: { text: array, style, options }\n        });\n      }\n    });\n  }\n\n  output() {\n    const { host, path } = this;\n    this.iframe = document.createElement('iframe');\n    this.iframe.style = 'border:0 ;position: fixed;left: 0;top: 0;z-index: 9999;cursor: wait;background-color: #fff;opacity: 0.5;';\n    this.iframe.width = '100%';\n    this.iframe.height = '100%';\n    this.iframe.src = `${host}${path}`;\n    document.body.appendChild(this.iframe);\n    const self = this;\n    const promise = new Promise(resolve => {\n      function handleOnReceivedMessage(event) {\n        if (event.data && event.data.type) {\n          if (event.data.type === 'ready') {\n            const data = {\n              data: self.data,\n              options: self.options\n            };\n            // console.log('data', data);\n            self.iframe.contentWindow.postMessage(data, '*');\n          } else if (event.data.type === 'finish') {\n            // console.log(event.data.data);\n            resolve(event.data.data);\n            document.body.removeChild(self.iframe);\n            window.removeEventListener('message', handleOnReceivedMessage, false);\n          }\n        }\n      }\n      window.addEventListener('message', handleOnReceivedMessage);\n    });\n    return promise\n      .catch(error => {\n        console.log('ERROR', error);\n        return null;\n      });\n  }\n\n  async save(fileName = null) {\n    const blob = await this.output();\n    const url = window.URL.createObjectURL(blob);\n    var a = document.createElement('a');\n    document.body.appendChild(a);\n    a.style = 'display: none';\n    a.href = url;\n    a.download = fileName || 'untitled.pdf';\n    a.click();\n    window.URL.revokeObjectURL(url);\n  }\n}\n\nexport default Pdf;\n","import React, { Component } from 'react'\nimport { Bar } from 'react-chartjs-2'\n\nimport Pdf from 'ngager-pdfwriter'\n\nconst html2canvas = require('html2canvas');\n\nfunction randomScalingFactor() {\n  return Math.floor(Math.random() * 100);\n}\n\nconst data = {\n  labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],\n  datasets: [{\n    label: 'Dataset 1',\n    backgroundColor: 'rgba(255, 99, 132, 0.5)',\n    borderColor: 'rgb(255, 99, 132)',\n    borderWidth: 1,\n    data: [\n      randomScalingFactor(),\n      randomScalingFactor(),\n      randomScalingFactor(),\n      randomScalingFactor(),\n      randomScalingFactor(),\n      randomScalingFactor(),\n      randomScalingFactor()\n    ]\n  }, {\n    label: 'Dataset 2',\n    backgroundColor: 'rgba(255, 159, 64, 0.5)',\n    borderColor: 'rgb(255, 159, 64)',\n    borderWidth: 1,\n    data: [\n      randomScalingFactor(),\n      randomScalingFactor(),\n      randomScalingFactor(),\n      randomScalingFactor(),\n      randomScalingFactor(),\n      randomScalingFactor(),\n      randomScalingFactor()\n    ]\n  }]\n};\nconst layout = {\n  padding: Object.assign(\n    {\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    }\n  )\n};\n\nconst text = '3. <b>Consultation Services</b>: The Recruitment team provides <b>consultation on </b>new and replacement positions - hiring  –  process, salary<b> range, </b> hehehe<br><br>   <b>availability, possible</b> challenges/risks and strategies <br>to close the roles.';\n\nconst text2 = 'The man who knows his worth respects his fellow man because he respects himself first. He does not boast; is not self-seeking; nor does he force his personal opinion on others.';\n\nconst text3 = '<span style=\"color: #FF6347;font-weight: bold;\">#</span> What website or app has completely changed your life for better or for worse?'\n\nexport default class App extends Component {\n  async onClick() {\n    // console.log('onClick', this.props);\n    const pdf = new Pdf({ defaultFontSize: 11, defaultColor: '#222222' });\n    // pdf.setHost('http://localhost')\n    try {\n      pdf.addText(text, { fontSize: 12, color: '#BBBBBB' });\n      pdf.addText(' ');\n      pdf.addIcon('', { color: '#BBBBBB' });\n      pdf.moveUp();\n      pdf.addText(text2, null, { indent: 16 });\n      pdf.addText(' ');\n      pdf.addText(text3);\n      pdf.addText(' ');\n      const canvas = await html2canvas(this.chart);\n      const dataUrl = canvas.toDataURL();\n      // const dataUrl = await domtoimage.toPng(this.chart);\n      pdf.addImage(dataUrl);\n    } catch (e) {\n      console.log('ERROR', e);\n    }\n    // const blob = await pdf.output();\n    // console.log('blob', blob);\n    await pdf.save('test.pdf');\n  }\n\n  render () {\n    return (\n      <div style={{ display: 'flex', margin: 'auto', flexDirection: 'column', maxWidth: 700 }}>\n        <p style={{ color: '#BBBBBB' }} dangerouslySetInnerHTML={{ __html: text }} />\n        <p>\n          <i style={{ paddingRight: 6, color: '#BBBBBB' }} className='fas fa-quote-left'></i>\n           {text2}\n        </p>\n        <p dangerouslySetInnerHTML={{ __html: text3 }} />\n        <div\n          ref={el => {\n              this.chart = el || this.chart;\n            }}\n          style={{ display: 'flex', flex: 1, maxHeight: 400, marginBottom: 50 }}\n        >\n          <Bar\n            data={data}\n            height={300}\n            options={{\n              cornerRadius: 0,\n              layout,\n              maintainAspectRatio: false,\n              legend: {\n                display: false\n              },\n              scales: {\n                xAxes: [\n                  Object.assign(\n                    {\n                      barThickness: 40,\n                      gridLines: {\n                        display: false,\n                        offsetGridLines: false\n                      },\n                      stacked: true\n                    }\n                  )\n                ],\n                yAxes: [\n                  Object.assign(\n                    {\n                      barPercentage: 0.9,\n                      categoryPercentage: 0.55,\n                      ticks: {\n                        suggestedMin: 0,\n                        suggestedMax: 100,\n                        callback: value => {\n                          if (value % 1 === 0) {\n                            return value;\n                          }\n                          return null;\n                        }\n                      }\n                    }\n                  )\n                ]\n              }\n            }}\n          />\n        </div>\n        <button onClick={() => this.onClick()}>Download PDF</button>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}